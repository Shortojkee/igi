@model MyShop.WebUI.Models.ProductsAdminViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h2>Продукты</h2>
<div id="product-categories">
    <ul>
        <li>
            @Ajax.ActionLink("Все товары", "Products", "Admin",
            new AjaxOptions
            {
                UpdateTargetId = "ProductList", // <-- DOM element ID to update
            })
        </li>
        @foreach (var category in Model.Categories)
        {
            <li>
                @Ajax.ActionLink(category.Name, "Products", "Admin",
                new
                {
                    category = category.Name
                },
                new AjaxOptions
                {
                    UpdateTargetId = "ProductList"
                })
            </li>
        }
    </ul>
</div>
    <p>
        @Html.ActionLink("Добавить товар", "Create")
    </p>


    <div id="ProductList">
        <table class="Grid">
            <tr>
                <th>Id</th>
                <th>Название</th>
                <th>Категория</th>
                <th>Цена</th>
                <th></th>
            </tr>

            @foreach (var item in Model.Products)
            {
                <tr>
                    <td>@Html.DisplayFor(modelItem => item.Id)</td>
                    <td>@Html.ActionLink(item.Name, "Edit", new { item.Id })</td>
                    <td>@Html.DisplayFor(modelItem => item.Category.Name)</td>
                    <td>@Html.DisplayFor(modelItem => item.Price)</td>
                    <td>
                        @using (Html.BeginForm("Delete", "Admin"))
                        {
                            @Html.Hidden("Id", item.Id)
                            <input type="submit" value="Delete" />
                        }
                    </td>
                </tr>
            }

        </table>
    </div>
